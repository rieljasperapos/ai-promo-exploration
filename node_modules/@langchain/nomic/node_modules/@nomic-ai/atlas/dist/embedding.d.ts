import { BaseAtlasClass } from 'general';
import { AtlasUser } from 'user';
type EmbedderOptions = {
    model?: 'nomic-embed-text-v1';
    maxTokens?: number;
};
type EmbeddingModel = 'nomic-embed-text-v1';
export declare function embed(value: string, apiKey: string): Promise<number[]>;
export declare function embed(values: string[], apiKey: string): Promise<number[][]>;
/**
 * A class that pools and runs requests to the Nomic embedding API.
 * If you are dispatching dozens or more embedding requests in quick
 * succession, this class handles pooling and backoff to ensure you get
 * your results as quickly as possible.
 *
 * For best results, **do not await your embedding results until they are needed**.
 *
 * For example, if you are embedding 1000 lines of text, you can do the
 * following:
 *
 * GOOD -- Nomic will break down your big request into multiple medium-sized ones.
 * ```js
 * const documents = ["Once upon a time", "there was a girl named Goldilocks", …, "and they all lived happily ever after"]
 * const embedder = new Embedder(myApiKey)
 * const embeddings = await embedder.embed(documents)
 * ```
 *
 * GOOD -- Nomic will combine your small requests into several medium-size
 * ```js
 * const documents = ["Once upon a time", "there was a girl named Goldilocks", …, "and they all lived happily ever after"]
 * const embedder = new Embedder(myApiKey)
 * const promises = []
 * for (let document of documents) {
 *    promises.push(embedder.embed(document))
 * }
 * const embeddings = await Promise.all(promises)
 * ```
 *
 * BAD -- You will generate many small, inefficient requests
 * ```js
 *  * const documents = ["Once upon a time", "there was a girl named Goldilocks", …, "and they all lived happily ever after"]
 * const embedder = new Embedder(myApiKey)
 * const embeddings = []
 * for (let document of documents) {
 *    const embedding = await embedder.embed(document); // <- premature await.
 *    embeddings.push(embedding);
 * }
 * ```
 */
export declare class Embedder extends BaseAtlasClass {
    model: EmbeddingModel;
    embedQueue: [string, (embedding: number[]) => void, (error: any) => void][];
    tokensUsed: number;
    nextScheduledYield: number;
    nextScheduledFlush: null | unknown;
    /**
     *
     * @param apiKey Your nomic API key, beginning with 'nk'.
     * @param user (Optionally)
     * @param options
     */
    constructor(apiKey: string, options: EmbedderOptions | undefined);
    constructor(user: AtlasUser, options: EmbedderOptions | undefined);
    private _embed;
    private flushDeferredEmbeddings;
    private periodicallyFlushCache;
    embed(value: string): Promise<number[]>;
    embed(value: string[]): Promise<number[][]>;
}
export {};
